# ============================================================================
# HRMS Portal - Unified Environment Configuration
# ============================================================================
# This single .env file works for BOTH local development and Docker deployment
#
# SETUP INSTRUCTIONS:
# 1. Copy this file to .env in the project root:
#    cp .env.example .env
#
# 2. Fill in all required values (marked with <REQUIRED>)
#
# 3. IMPORTANT: Never commit .env to version control!
#
# USAGE:
# - Local Dev: Backend reads from root .env, frontend uses Vite proxy
# - Docker: docker-compose.yml uses this root .env file
# ============================================================================

# ----------------------------------------------------------------------------
# DATABASE CONFIGURATION (REQUIRED)
# ----------------------------------------------------------------------------
# Your hosted SQL Server database (used by both local and deployed)
SPRING_DATASOURCE_URL=jdbc:sqlserver://<YOUR_DB_HOST>:1433;databaseName=<YOUR_DB_NAME>;encrypt=true;trustServerCertificate=false;loginTimeout=30
SPRING_DATASOURCE_USERNAME=<REQUIRED>
SPRING_DATASOURCE_PASSWORD=<REQUIRED>
SPRING_DATASOURCE_DRIVER_CLASS_NAME=com.microsoft.sqlserver.jdbc.SQLServerDriver

# ----------------------------------------------------------------------------
# DATABASE CONNECTION POOL CONFIGURATION (OPTIONAL - Defaults Provided)
# ----------------------------------------------------------------------------
HIKARI_MAX_POOL_SIZE=20
HIKARI_MIN_IDLE=5
HIKARI_CONNECTION_TIMEOUT=20000
HIKARI_MAX_LIFETIME=600000
HIKARI_LEAK_DETECTION_THRESHOLD=60000

# ----------------------------------------------------------------------------
# JPA/HIBERNATE CONFIGURATION (OPTIONAL - Defaults Provided)
# ----------------------------------------------------------------------------
# Options: none, validate, update, create, create-drop
# RECOMMENDED: 'none' for production, 'validate' for safety
SPRING_JPA_HIBERNATE_DDL_AUTO=none
SPRING_JPA_SHOW_SQL=false
SPRING_JPA_PROPERTIES_HIBERNATE_DIALECT=org.hibernate.dialect.SQLServerDialect
HIBERNATE_FORMAT_SQL=true
HIBERNATE_BATCH_SIZE=20
HIBERNATE_QUERY_TIMEOUT=30000

# ----------------------------------------------------------------------------
# SECURITY - JWT CONFIGURATION (REQUIRED)
# ----------------------------------------------------------------------------
# Generate a strong secret key (minimum 256 bits recommended)
# Example: openssl rand -base64 32
SECURITY_JWT_SECRET=<REQUIRED - Generate a strong random secret key>
# Token expiration in milliseconds (default: 86400000 = 24 hours)
SECURITY_JWT_EXPIRATION=86400000

# ----------------------------------------------------------------------------
# SUPER ADMIN CREDENTIALS (REQUIRED)
# ----------------------------------------------------------------------------
# Initial super admin account for system setup
SUPERADMIN_EMAIL=<REQUIRED - e.g., admin@yourcompany.com>
SUPERADMIN_PASSWORD=<REQUIRED - Use a strong password>

# ----------------------------------------------------------------------------
# AZURE BLOB STORAGE CONFIGURATION (REQUIRED)
# ----------------------------------------------------------------------------
# Azure Storage for document/file uploads
STORAGE_AZURE_CONNECTION_STRING=<REQUIRED - Your Azure Storage Connection String>
STORAGE_AZURE_CONTAINER=<REQUIRED - e.g., hrms-documents>
DOCUMENTS_STORAGE_BASE_PATH=documents

# ----------------------------------------------------------------------------
# CORS CONFIGURATION
# ----------------------------------------------------------------------------
# IMPORTANT: For local dev use http://localhost:3000
#            For Docker deployment use http://localhost or your domain
# You can specify multiple origins separated by commas
CORS_ALLOWED_ORIGINS=http://localhost:3000,http://localhost

# ----------------------------------------------------------------------------
# EMAIL CONFIGURATION (OPTIONAL - For password reset, notifications, etc.)
# ----------------------------------------------------------------------------
# Leave empty if not using email features
SPRING_MAIL_HOST=smtp.gmail.com
SPRING_MAIL_PORT=587
SPRING_MAIL_USERNAME=
SPRING_MAIL_PASSWORD=
SPRING_MAIL_PROPERTIES_MAIL_SMTP_AUTH=true
SPRING_MAIL_PROPERTIES_MAIL_SMTP_STARTTLS_ENABLE=true

# ----------------------------------------------------------------------------
# LOGGING CONFIGURATION (OPTIONAL - Defaults Provided)
# ----------------------------------------------------------------------------
# Options: TRACE, DEBUG, INFO, WARN, ERROR
LOG_LEVEL_ROOT=INFO
LOG_LEVEL_HRMS=INFO
LOG_LEVEL_SECURITY=WARN
LOG_LEVEL_SPRING_SECURITY=WARN
LOG_LEVEL_WEB=INFO

# ----------------------------------------------------------------------------
# API DOCUMENTATION (OPTIONAL - Defaults Provided)
# ----------------------------------------------------------------------------
# Enable/disable Swagger UI (disable in production for security)
SWAGGER_ENABLED=true

# ----------------------------------------------------------------------------
# FILE UPLOAD LIMITS (OPTIONAL - Defaults Provided)
# ----------------------------------------------------------------------------
MAX_FILE_SIZE=10MB
MAX_REQUEST_SIZE=10MB

# ----------------------------------------------------------------------------
# FRONTEND CONFIGURATION (OPTIONAL)
# ----------------------------------------------------------------------------
# NOTE: This is NOT needed for Docker deployment (nginx handles routing)
# Only used if you want to make direct API calls in frontend code
# For local dev with Vite proxy or Docker with nginx proxy, leave as is
VITE_API_BASE_URL=http://localhost:8080

# ============================================================================
# DEPLOYMENT NOTES:
# ============================================================================
#
# LOCAL DEVELOPMENT:
# ------------------
# Backend: mvn spring-boot:run
#   - Reads this .env from project root
#   - Runs on http://localhost:8080
#
# Frontend: npm run dev (from frontend directory)
#   - Runs on http://localhost:3000
#   - Vite proxy forwards /api and /auth to http://localhost:8080
#   - No need to change baseURL
#
# DOCKER DEPLOYMENT:
# ------------------
# docker-compose up --build
#   - Both services use this single .env file
#   - Frontend (nginx) runs on port 80
#   - Backend runs on port 8080 (internal)
#   - Nginx proxies /api and /auth to backend:8080
#   - No need to change baseURL or configuration
#
# VM DEPLOYMENT:
# --------------
# 1. Upload your .env file to the VM (keep it secure!)
# 2. Run: docker-compose up -d --build
# 3. Access via: http://<your-vm-ip>
#
# SECURITY CHECKLIST:
# -------------------
# ✓ Strong JWT secret (32+ characters)
# ✓ Strong superadmin password
# ✓ Secure database credentials
# ✓ Never commit .env to git
# ✓ Restrict CORS origins in production
# ✓ Disable Swagger in production
# ✓ Use HTTPS in production (configure nginx/load balancer)
# ============================================================================
